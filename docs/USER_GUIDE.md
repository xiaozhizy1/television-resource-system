# 用户使用手册

本手册详细介绍 Television Resource System (TRS) 的各项功能和使用方法。

## 目录

- [首次登录](#首次登录)
- [系统配置](#系统配置)
- [115网盘管理](#115网盘管理)
- [影视资源管理](#影视资源管理)
- [通知配置](#通知配置)

## 首次登录

### 访问系统

1. 打开浏览器访问: `http://ip:6100`
2. 使用默认账号登录:
   - 用户名: `admin`
   - 密码: `admin123`

### 修改密码

⚠️ **首次登录后必须立即修改密码！**

1. 核心配置
2. 选择"修改密码"
3. 输入当前密码和新密码
4. 点击"确认修改"

## 系统配置

### 核心配置

进入"系统设置" > "核心配置"页面:

#### 基础设置

- **系统名称**: 自定义系统显示名称
- **系统描述**: 系统简介说明
- **时区设置**: 选择所在时区（默认: Asia/Shanghai）

#### 安全设置

- **会话超时**: 设置用户会话过期时间（默认: 24小时）
- **密码策略**: 
  - 最小长度: 8位
  - 必须包含: 大小写字母、数字
  - 定期更换: 建议90天

#### 存储设置

- **数据库路径**: config/database
- **临时目录**: config/temp
- **日志文件**: config/logos

### 影视资源配置项

1. 登录https://nullbr.online/ 注册账号
2. 申请 App ID 在用户管理
3. 配置 App ID  API Key 核心配置-影视资源-填入对应的 App ID  API Key


### TMDB 配置

TMDB (The Movie Database) 用于获取影视作品的详细信息。

#### 获取 API Key

1. 访问 [TMDB官网](https://www.themoviedb.org/)
2. 注册并登录账号
3. 进入"设置" > "API"
4. 申请 API Key（选择"Developer"类型）
5. 复制 API Key (v3 auth)

#### 配置步骤

1. 进入"系统设置" > "TMDB配置"
2. 填入 API Key
3. 选择语言（默认: zh-CN）
4. 点击"测试连接"验证配置
5. 保存配置


## 115网盘管理

### 登录115账号

#### 方式一: 扫码登录（推荐）

1. 进入"115网盘" > "账号管理"
2. 选择登录平台（Web/Android/iOS等）
3. 使用115 APP扫描二维码
4. 等待登录成功提示

#### 方式二: Cookie导入

1. 在浏览器登录115网盘
2. 按F12打开开发者工具
3. 切换到"Application" > "Cookies"
4. 复制所有Cookie
5. 在系统中选择"导入Cookie"
6. 粘贴并保存

### 文件管理

#### 浏览文件

1. 进入"115网盘" > "文件管理"
2. 点击文件夹可进入子目录
3. 支持的操作:
   - 📁 新建文件夹
   - ✏️ 重命名
   - 🗑️ 删除


#### 批量操作

1. 勾选多个文件/文件夹
2. 点击批量操作按钮:
   - 批量删除

### 离线下载

#### 添加离线任务

1. 进入"115网盘" > "离线下载"
2. 点击"新建任务"
3. 输入下载链接（支持HTTP/磁力链接/BT种子）
4. 选择保存目录
5. 点击"开始下载"

#### 管理离线任务

- **查看进度**: 实时显示下载进度
- **暂停/继续**: 控制任务状态
- **删除任务**: 删除已完成或失败的任务
- **转存文件**: 将下载完成的文件转存到网盘

### 分享管理

#### 创建分享

1. 选择要分享的文件/文件夹
2. 点击"分享"按钮
3. 设置分享选项:
   - 有效期: 1天/7天/永久
   - 访问密码: 可选
   - 下载次数限制: 可选
4. 生成分享链接


#### Cron表达式示例

```
# 每天凌晨2点执行
0 2 * * *

# 每小时执行一次
0 * * * *

# 每周一上午9点执行
0 9 * * 1

# 每月1号凌晨3点执行
0 3 1 * *

# 每5分钟执行一次
*/5 * * * *
```

### 预定义任务类型

#### 数据库备份

- **功能**: 自动备份数据库
- **建议频率**: 每天一次
- **参数**: 备份保留天数

#### 日志清理

- **功能**: 清理过期日志文件
- **建议频率**: 每周一次
- **参数**: 保留天数

#### TMDB信息更新

- **功能**: 批量更新影视资源信息
- **建议频率**: 每周一次
- **参数**: 更新范围

#### 115 Cookie刷新

- **功能**: 自动刷新115登录状态
- **建议频率**: 每天一次
- **参数**: 无

### 管理任务

#### 查看任务状态

- **运行中**: 绿色标识
- **已暂停**: 黄色标识
- **失败**: 红色标识
- **已完成**: 灰色标识

#### 任务操作

- **立即执行**: 手动触发任务
- **暂停/恢复**: 控制任务状态
- **编辑**: 修改任务配置
- **删除**: 删除任务
- **查看日志**: 查看执行历史

## 通知配置

### Telegram Bot配置

#### 创建Bot

1. 在Telegram中搜索 `@BotFather`
2. 发送 `/newbot` 命令
3. 按提示设置Bot名称和用户名
4. 获取Bot Token

#### 配置系统

1. 进入"系统设置" > "Telegram配置"
2. 填入Bot Token
3. 点击"获取更新"获取Chat ID
4. 或手动输入Chat ID
5. 测试连接
6. 保存配置

#### 通知设置

配置哪些事件触发通知:

- ✅ 任务完成通知
- ✅ 任务失败通知
- ✅ 系统错误通知
- ✅ 登录提醒 
- ⬜ 保存影视资源到115网盘（后续添加）
- ⬜ 添加磁力链接到115网盘（后续添加）


#### 使用企业微信

1. 创建企业微信应用
2. 获取企业ID、应用Secret等信息
3. 在系统中配置
4. 测试通知
5. 保存配置

## 系统管理

### 日志查看

#### 访问日志

1. 进入"右上角> "系统日志"
2. 选择日志类型:
   - 应用日志
   - 错误日志
   - 访问日志
3. 设置筛选条件:
   - 时间范围
   - 日志级别
   - 关键词搜索
4. 查看日志详情

#### 日志级别

- **DEBUG**: 调试信息
- **INFO**: 一般信息
- **WARN**: 警告信息
- **ERROR**: 错误信息
- **FATAL**: 严重错误


## 常见问题

### 登录问题

**Q: 忘记密码怎么办？**

A: 使用重置密钥重置:
```bash
# 查看重置密钥
cat config/reset_key.txt

# 在登录页面点击"忘记密码"
# 输入重置密钥即可重置为默认密码
```

### 115网盘问题

**Q: Cookie过期怎么办？**

A: 重新扫码登录或导入新的Cookie。

**Q: 上传失败怎么办？**

A: 检查:
1. 网络连接是否正常
2. 115账号是否正常
3. 文件大小是否超限
4. 磁盘空间是否充足

### TMDB问题

**Q: 无法获取影视信息？**

A: 检查:
1. API Key是否正确
2. 网络是否能访问TMDB
3. 是否需要配置代理

### 性能问题

**Q: 系统运行缓慢？**

A: 尝试:
1. 清理过期日志
2. 优化数据库
3. 检查磁盘空间
4. 重启服务

## 获取帮助

- 📖 查看 [部署指南](./DEPLOYMENT.md)
- 🐛 提交 [Issue](https://github.com/xiaozhizy1/television-resource-system/TRS/issues)
- 💬 加入 [讨论区](https://github.com/xiaozhizy1/television-resource-system/discussions)

---


更新时间: 2024-01-01

